<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="MauiEnterpriseApp.Views.Main.ItemDetailPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:resx="clr-namespace:MauiEnterpriseApp.Resources.Localization"
    xmlns:shapes="clr-namespace:Microsoft.Maui.Controls.Shapes;assembly=Microsoft.Maui.Controls"
    x:Name="PageRoot"
    Title="{Binding Title}">
    <ContentPage.ToolbarItems>
        <ToolbarItem
            Text="{x:Static resx:AppResources.ItemDetail_Edit_Button}"
            Priority="0"
            Order="Primary"
            Command="{Binding EditCommand}" />
    </ContentPage.ToolbarItems>
    <ScrollView>
        <VerticalStackLayout
            Padding="24"
            Spacing="24">

            <!-- Header görsel + başlık -->
            <Grid
                RowDefinitions="Auto,Auto,Auto"
                ColumnDefinitions="*"
                RowSpacing="8">

                <!-- Başlık -->
                <Label
                    Grid.Row="1"
                    Text="{Binding Item.Title}"
                    FontAttributes="Bold"
                    FontSize="22"
                    LineBreakMode="WordWrap"
                    Margin="0,8,0,0" />

                <!-- Status chip -->
                <Border
                    Grid.Row="2"
                    HorizontalOptions="Start"
                    Padding="8,2"
                    Margin="0,4,0,0"
                    BackgroundColor="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray800}}"
                    StrokeThickness="0">

                    <Border.StrokeShape>
                        <shapes:RoundRectangle CornerRadius="12" />
                    </Border.StrokeShape>

                    <Label
                        Text="{Binding Item.Status}"
                        FontSize="12"
                        TextColor="{StaticResource Gray900}" />
                </Border>
            </Grid>

            <!-- Genel Bilgiler kartı -->
            <Border
                BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray900}}"
                StrokeThickness="0"
                Padding="16">

                <Border.StrokeShape>
                    <shapes:RoundRectangle CornerRadius="16" />
                </Border.StrokeShape>

                <Border.Shadow>
                    <Shadow
                        Radius="12"
                        Opacity="0.25"
                        Offset="0,4" />
                </Border.Shadow>

                <VerticalStackLayout Spacing="8">
                    <Label
                        Text="{x:Static resx:AppResources.ItemDetail_Section_General}"
                        Style="{StaticResource SubHeadline}"
                        HorizontalOptions="Start"
                        Margin="0,0,0,8" />

                    <Grid
                        RowSpacing="6"
                        ColumnSpacing="12">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!-- Başlık -->
                        <Label
                            Grid.Row="0"
                            Grid.Column="0"
                            Text="{x:Static resx:AppResources.ItemDetail_Label_Title}"
                            FontAttributes="Bold" />
                        <Label
                            Grid.Row="0"
                            Grid.Column="1"
                            Text="{Binding Item.Title}"
                            LineBreakMode="WordWrap" />

                        <!-- Açıklama -->
                        <Label
                            Grid.Row="1"
                            Grid.Column="0"
                            Text="{x:Static resx:AppResources.ItemDetail_Label_Description}"
                            FontAttributes="Bold" />
                        <Label
                            Grid.Row="1"
                            Grid.Column="1"
                            Text="{Binding Item.Description}"
                            LineBreakMode="WordWrap" />
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Sistem Bilgileri kartı -->
            <Border
                BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray900}}"
                StrokeThickness="0"
                Padding="16">

                <Border.StrokeShape>
                    <shapes:RoundRectangle CornerRadius="16" />
                </Border.StrokeShape>

                <Border.Shadow>
                    <Shadow
                        Radius="12"
                        Opacity="0.25"
                        Offset="0,4" />
                </Border.Shadow>

                <VerticalStackLayout Spacing="8">
                    <Label
                        Text="{x:Static resx:AppResources.ItemDetail_Section_Metadata}"
                        Style="{StaticResource SubHeadline}"
                        HorizontalOptions="Start"
                        Margin="0,0,0,8" />

                    <Grid
                        RowSpacing="6"
                        ColumnSpacing="12">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!-- Durum -->
                        <Label
                            Grid.Row="0"
                            Grid.Column="0"
                            Text="{x:Static resx:AppResources.ItemDetail_Label_Status}"
                            FontAttributes="Bold" />
                        <Label
                            Grid.Row="0"
                            Grid.Column="1"
                            Text="{Binding Item.Status}" />

                        <!-- Oluşturulma -->
                        <Label
                            Grid.Row="1"
                            Grid.Column="0"
                            Text="{x:Static resx:AppResources.ItemDetail_Label_CreatedAt}"
                            FontAttributes="Bold" />
                        <Label
                            Grid.Row="1"
                            Grid.Column="1"
                            Text="{Binding Item.CreatedAt, StringFormat='{}{0:dd.MM.yyyy HH:mm}'}" />

                        <!-- Son Güncelleme -->
                        <Label
                            Grid.Row="2"
                            Grid.Column="0"
                            Text="{x:Static resx:AppResources.ItemDetail_Label_LastUpdatedAt}"
                            FontAttributes="Bold" />
                        <Label
                            Grid.Row="2"
                            Grid.Column="1"
                            Text="{Binding Item.LastUpdatedAt, StringFormat='{}{0:dd.MM.yyyy HH:mm}'}" />

                        <!-- Sorumlu -->
                        <Label
                            Grid.Row="3"
                            Grid.Column="0"
                            Text="{x:Static resx:AppResources.ItemDetail_Label_Owner}"
                            FontAttributes="Bold" />
                        <Label
                            Grid.Row="3"
                            Grid.Column="1"
                            Text="{Binding Item.Owner}" />
                    </Grid>

                    <!-- Etiketler -->
                    <Grid
                        Margin="0,8,0,0"
                        RowSpacing="6"
                        ColumnSpacing="12">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <Label
                            Grid.Row="0"
                            Grid.Column="0"
                            Text="{x:Static resx:AppResources.ItemDetail_Label_Tags}"
                            FontAttributes="Bold" />
                        <Label
                            Grid.Row="0"
                            Grid.Column="1"
                            Text="{Binding Item.Tags}"
                            LineBreakMode="WordWrap" />
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Durum / hata mesajı -->
            <Label
                Text="{Binding StatusMessage}"
                TextColor="{StaticResource Gray500}"
                IsVisible="{Binding StatusMessage, Converter={StaticResource StringNotNullOrEmptyConverter}}" />

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
