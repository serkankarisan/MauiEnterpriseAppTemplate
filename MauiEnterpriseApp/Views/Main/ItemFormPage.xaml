<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="MauiEnterpriseApp.Views.Main.ItemFormPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:resx="clr-namespace:MauiEnterpriseApp.Resources.Localization"
    x:Name="PageRoot"
    Title="{Binding Title}">

    <ScrollView>
        <VerticalStackLayout
            Padding="24"
            Spacing="24">

            <!-- Başlık -->
            <Label
                Text="{Binding HeaderTitle}"
                Style="{StaticResource Headline}"
                HorizontalOptions="Start" />

            <!-- Form kartı -->
            <Border
                BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray900}}"
                StrokeThickness="0"
                Padding="16">

                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="16" />
                </Border.StrokeShape>

                <Border.Shadow>
                    <Shadow
                        Radius="12"
                        Opacity="0.25"
                        Offset="0,4" />
                </Border.Shadow>

                <VerticalStackLayout Spacing="12">

                    <!-- Başlık -->
                    <VerticalStackLayout Spacing="4">
                        <Label
                            Text="{x:Static resx:AppResources.ItemForm_Label_Title}"
                            FontAttributes="Bold" />
                        <Entry
                            Text="{Binding TitleInput}"
                            Placeholder="{x:Static resx:AppResources.ItemForm_Label_Title}"
                            ClearButtonVisibility="WhileEditing" />
                    </VerticalStackLayout>

                    <!-- Açıklama -->
                    <VerticalStackLayout Spacing="4">
                        <Label
                            Text="{x:Static resx:AppResources.ItemForm_Label_Description}"
                            FontAttributes="Bold" />
                        <Editor
                            Text="{Binding DescriptionInput}"
                            AutoSize="TextChanges"
                            Placeholder="{x:Static resx:AppResources.ItemForm_Label_Description}" />
                    </VerticalStackLayout>

                    <!-- Durum -->
                    <VerticalStackLayout Spacing="4">
                        <Label
                            Text="{x:Static resx:AppResources.ItemForm_Label_Status}"
                            FontAttributes="Bold" />
                        <Entry
                            Text="{Binding StatusInput}"
                            Placeholder="{x:Static resx:AppResources.ItemForm_Label_Status}" />
                    </VerticalStackLayout>

                    <!-- Sorumlu -->
                    <VerticalStackLayout Spacing="4">
                        <Label
                            Text="{x:Static resx:AppResources.ItemForm_Label_Owner}"
                            FontAttributes="Bold" />
                        <Entry
                            Text="{Binding OwnerInput}"
                            Placeholder="{x:Static resx:AppResources.ItemForm_Label_Owner}" />
                    </VerticalStackLayout>

                    <!-- Etiketler -->
                    <VerticalStackLayout Spacing="4">
                        <Label
                            Text="{x:Static resx:AppResources.ItemForm_Label_Tags}"
                            FontAttributes="Bold" />
                        <Entry
                            Text="{Binding TagsInput}"
                            Placeholder="{x:Static resx:AppResources.ItemForm_Label_Tags}" />
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>

            <!-- Hata mesajı -->
            <Label
                Text="{Binding ErrorMessage}"
                TextColor="{StaticResource Magenta}"
                IsVisible="{Binding ErrorMessage, Converter={StaticResource StringNotNullOrEmptyConverter}}" />

            <!-- Durum mesajı -->
            <Label
                Text="{Binding StatusMessage}"
                TextColor="{StaticResource Gray500}"
                IsVisible="{Binding StatusMessage, Converter={StaticResource StringNotNullOrEmptyConverter}}" />

            <!-- Butonlar -->
            <Grid
                ColumnDefinitions="*,*"
                ColumnSpacing="12"
                Margin="0,8,0,0">

                <Button
                    Grid.Column="0"
                    Text="{x:Static resx:AppResources.ItemForm_Button_Cancel}"
                    Command="{Binding NavigationBackCommand}"
                    IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBooleanConverter}}" />

                <Button
                    Grid.Column="1"
                    Text="{x:Static resx:AppResources.ItemForm_Button_Save}"
                    Command="{Binding SaveCommand}"
                    IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBooleanConverter}}" />
            </Grid>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>