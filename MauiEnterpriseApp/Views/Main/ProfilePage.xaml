<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="MauiEnterpriseApp.Views.Main.ProfilePage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:resx="clr-namespace:MauiEnterpriseApp.Resources.Localization"
    xmlns:shapes="clr-namespace:Microsoft.Maui.Controls.Shapes;assembly=Microsoft.Maui.Controls"
    Title="{Binding Title}">

    <ScrollView>
        <VerticalStackLayout
            Padding="24"
            Spacing="24">

            <!-- Avatar + İsim + E-posta -->
            <Grid
                RowDefinitions="Auto,Auto,Auto"
                HorizontalOptions="Center">

                <!-- Avatar kartı -->
                <Border
                    Grid.Row="0"
                    WidthRequest="140"
                    HeightRequest="140"
                    BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Gray900}}"
                    StrokeThickness="0"
                    HorizontalOptions="Center"
                    VerticalOptions="Center">

                    <Border.StrokeShape>
                        <shapes:RoundRectangle CornerRadius="70" />
                    </Border.StrokeShape>

                    <Border.Shadow>
                        <Shadow
                            Radius="15"
                            Opacity="0.35"
                            Offset="0,6" />
                    </Border.Shadow>

                    <Image
                        Source="{Binding Profile.ProfileImageData, Converter={StaticResource ImageDataToImageSourceConverter}}"
                        Aspect="AspectFill"
                        Margin="0" />
                </Border>

                <!-- İsim -->
                <Label
                    Grid.Row="1"
                    Text="{Binding Profile.FullName}"
                    FontAttributes="Bold"
                    FontSize="22"
                    HorizontalOptions="Center"
                    HorizontalTextAlignment="Center"
                    Margin="0,16,0,0" />

                <!-- E-posta -->
                <Label
                    Grid.Row="2"
                    Text="{Binding Profile.Email}"
                    FontSize="14"
                    TextColor="{StaticResource Gray500}"
                    HorizontalOptions="Center"
                    HorizontalTextAlignment="Center" />
            </Grid>

            <!-- Temel Bilgiler kartı -->
            <Border
                BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray900}}"
                StrokeThickness="0"
                Padding="16"
                Margin="0,8,0,0">

                <Border.StrokeShape>
                    <shapes:RoundRectangle CornerRadius="16" />
                </Border.StrokeShape>

                <Border.Shadow>
                    <Shadow
                        Radius="12"
                        Opacity="0.25"
                        Offset="0,4" />
                </Border.Shadow>

                <VerticalStackLayout Spacing="8">
                    <Label
                        Text="{x:Static resx:AppResources.Profile_Section_BasicInfo}"
                        Style="{StaticResource SubHeadline}"
                        HorizontalOptions="Start"
                        Margin="0,0,0,8" />

                    <Grid
                        RowSpacing="6"
                        ColumnSpacing="12">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!-- Departman -->
                        <Label
                            Grid.Row="0"
                            Grid.Column="0"
                            Text="{x:Static resx:AppResources.Profile_Label_Department}"
                            FontAttributes="Bold" />
                        <Label
                            Grid.Row="0"
                            Grid.Column="1"
                            Text="{Binding Profile.Department}"
                            LineBreakMode="TailTruncation"
                            MaxLines="1" />

                        <!-- Pozisyon -->
                        <Label
                            Grid.Row="1"
                            Grid.Column="0"
                            Text="{x:Static resx:AppResources.Profile_Label_Position}"
                            FontAttributes="Bold" />
                        <Label
                            Grid.Row="1"
                            Grid.Column="1"
                            Text="{Binding Profile.Position}"
                            LineBreakMode="TailTruncation"
                            MaxLines="1" />

                        <!-- Sisteme giriş -->
                        <Label
                            Grid.Row="2"
                            Grid.Column="0"
                            Text="{x:Static resx:AppResources.Profile_Label_JoinedDate}"
                            FontAttributes="Bold" />
                        <Label
                            Grid.Row="2"
                            Grid.Column="1"
                            Text="{Binding Profile.JoinedAt, StringFormat='{}{0:dd.MM.yyyy}'}" />
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- İletişim kartı -->
            <Border
                BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray900}}"
                StrokeThickness="0"
                Padding="16"
                Margin="0,0,0,8">

                <Border.StrokeShape>
                    <shapes:RoundRectangle CornerRadius="16" />
                </Border.StrokeShape>

                <Border.Shadow>
                    <Shadow
                        Radius="12"
                        Opacity="0.25"
                        Offset="0,4" />
                </Border.Shadow>

                <VerticalStackLayout Spacing="8">
                    <Label
                        Text="{x:Static resx:AppResources.Profile_Section_Contact}"
                        Style="{StaticResource SubHeadline}"
                        HorizontalOptions="Start"
                        Margin="0,0,0,8" />

                    <Grid
                        RowSpacing="6"
                        ColumnSpacing="12">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!-- E-posta -->
                        <Label
                            Grid.Row="0"
                            Grid.Column="0"
                            Text="{x:Static resx:AppResources.Profile_Label_Email}"
                            FontAttributes="Bold" />
                        <Label
                            Grid.Row="0"
                            Grid.Column="1"
                            Text="{Binding Profile.Email}"
                            LineBreakMode="TailTruncation"
                            MaxLines="1" />

                        <!-- Telefon -->
                        <Label
                            Grid.Row="1"
                            Grid.Column="0"
                            Text="{x:Static resx:AppResources.Profile_Label_Phone}"
                            FontAttributes="Bold" />
                        <Label
                            Grid.Row="1"
                            Grid.Column="1"
                            Text="{Binding Profile.PhoneNumber}"
                            LineBreakMode="TailTruncation"
                            MaxLines="1" />
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Durum / hata mesajı -->
            <Label
                Text="{Binding StatusMessage}"
                TextColor="{StaticResource Gray500}"
                IsVisible="{Binding StatusMessage, Converter={StaticResource StringNotNullOrEmptyConverter}}" />

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
